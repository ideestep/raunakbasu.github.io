<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lab Photos | Basu Neuro Lab</title>

  <!-- SAME CSS AS INDEX -->
  <link rel="stylesheet" href="assets/css/base.css">
  <link rel="stylesheet" href="assets/css/layout.css">
  <link rel="stylesheet" href="assets/css/components.css">

  <script src="assets/js/includes.js" defer></script>
</head>

<body>

<!-- HEADER -->
<div id="header-placeholder"></div>

<!-- HERO -->
<section class="page-hero hero-photos">
  <h1>Lab Photos</h1>
</section>

<!-- CONTENT -->
<main class="page-content">
  <div id="gallery" class="gallery-grid"></div>
</main>

<!-- FOOTER -->
<div id="footer-placeholder"></div>

<!-- LIGHTBOX -->
<div id="lightbox" class="lightbox">
  <span class="lightbox-close">&times;</span>
  <img class="lightbox-img" alt="">
  <p class="lightbox-caption"></p>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {

  const gallery = document.getElementById("gallery");
  const lightbox = document.getElementById("lightbox");
  const lightboxImg = document.querySelector(".lightbox-img");
  const lightboxCaption = document.querySelector(".lightbox-caption");
  const closeBtn = document.querySelector(".lightbox-close");

  fetch("assets/data/lab-photos.json")
    .then(res => res.json())
    .then(photos => {
      photos.forEach(photo => {
        const img = document.createElement("img");
        img.src = photo.src;
        img.alt = photo.caption || "";
        img.loading = "lazy";

        img.addEventListener("click", () => {
          lightbox.style.display = "flex";
          lightboxImg.src = photo.src;
          lightboxCaption.textContent = photo.caption || "";
          document.body.style.overflow = "hidden";
        });

        gallery.appendChild(img);
      });
    });

  function closeLightbox() {
    lightbox.style.display = "none";
    lightboxImg.src = "";
    document.body.style.overflow = "";
  }

  closeBtn.addEventListener("click", closeLightbox);
  lightbox.addEventListener("click", e => {
    if (e.target === lightbox) closeLightbox();
  });
  document.addEventListener("keydown", e => {
    if (e.key === "Escape") closeLightbox();
  });

});
</script>

</body>
</html>
